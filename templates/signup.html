{% extends "base.html" %}
{% block title %}Sign Up - TechHub{% endblock %}

{% block content %}
{# Import the flash message macro from login.html (or move macro to a shared file) #}
{% from "login.html" import render_flash with context %}

<div class="max-w-md mx-auto mt-12 mb-24 px-4">
  <h2 class="text-2xl font-bold text-center text-text-primary mb-2">
    Create your TechHub account
  </h2>
  <p class="mt-1 text-center text-sm text-text-secondary mb-6">
    Already have an account?
    <a href="{{ url_for('login') }}" class="font-medium text-primary hover:underline">
      Log in
    </a>
  </p>

  <div class="bg-card-bg p-8 border border-border-color rounded-lg shadow-md">
    <form class="space-y-6" method="POST" action="{{ url_for('signup') }}">
      {# Flash message handling using macro #}
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            {{ render_flash(message, category) }}
          {% endfor %}
        {% endif %}
      {% endwith %}

      <div>
        <label for="username" class="block text-sm font-medium text-text-primary mb-1">
          Username
        </label>
        <input
          id="username"
          name="username"
          type="text"
          required
          class="appearance-none block w-full px-4 py-2 border border-border-color rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm bg-body-bg dark:bg-gray-700 text-text-primary dark:text-text-primary transition duration-150 ease-in-out"
          placeholder="Choose a unique username"
        />
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-text-primary mb-1">
          Email address
        </label>
        <input
          id="email"
          name="email"
          type="email"
          required
          class="appearance-none block w-full px-4 py-2 border border-border-color rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm bg-body-bg dark:bg-gray-700 text-text-primary dark:text-text-primary transition duration-150 ease-in-out"
          placeholder="you@example.com"
        />
      </div>

      <div>
        <label for="password" class="block text-sm font-medium text-text-primary mb-1">
          Password
        </label>
        <input
          id="password"
          name="password"
          type="password"
          required
          class="appearance-none block w-full px-4 py-2 border border-border-color rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm bg-body-bg dark:bg-gray-700 text-text-primary dark:text-text-primary transition duration-150 ease-in-out"
          placeholder="Create a strong password"
        />
        {# Optional: Add password strength meter here #}
      </div>

      <div>
        <button type="submit" class="w-full btn-udemy btn-udemy-primary">
          <i class="fas fa-user-plus mr-2"></i> Create Account
        </button>
      </div>
    </form>

    <div class="mt-6 text-center">
        <p class="text-xs text-text-secondary">
          By signing up, you agree to our <a href="#" class="underline hover:text-primary">Terms of Service</a> and <a href="#" class="underline hover:text-primary">Privacy Policy</a>.
        </p>
    </div>
    
  </div>
</div>
{% endblock %}
